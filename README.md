# 🚀 JavaScript学習ツール

プログラミング学習用に作られた、ブラウザで動作する統合学習システムです。自動採点とコード可視化の2つのツールを提供します。

## ✨ 特徴

### 🔗 統合システム
- **📊 自動採点システム**: プログラミング問題の自動採点
- **🔍 コード可視化ツール**: JavaScript実行過程の可視化
- **🔄 シームレス連携**: 採点結果から直接可視化ツールへ遷移

### 🌐 基本機能
- **🌐 ブラウザだけで動作**: インストール不要、URLにアクセスするだけ
- **🔒 セキュア**: Web Workerによる安全な実行環境
- **📱 レスポンシブ**: PC・スマホ・タブレット対応
- **⚡ 高速**: リアルタイムでの採点結果表示
- **🧪 多角的テスト**: 複数テストケースによる包括的な採点
- **🚀 遅延読み込み**: 必要な問題のみを動的にロードし初期起動を高速化
- **💾 スケーラブル**: JSONファイル個別管理で数百問まで対応
- **🎨 美しいUI**: 直感的で使いやすいデザイン
- **📂 カテゴリ別整理**: タブ型UIで問題をカテゴリごとに整理

### 🔍 可視化機能
- **👀 ステップ実行**: コードを一行ずつ実行して動作確認
- **📊 変数追跡**: 変数の値変化をリアルタイム表示
- **⚙️ 実行制御**: 自動実行とステップ実行の切り替え
- **🎛️ 速度調整**: 実行速度を3段階で調整可能
- **📝 豊富なサンプル**: 学習用サンプルコードを内蔵

## 🚀 使い方

### 🌟 学習フロー
1. **メニューページ**: `index.html` - ツールの紹介と選択
2. **採点システム**: `grader.html` - 問題を解いて採点
3. **可視化ツール**: `visualizer.html` - コードの動作を詳細確認

### 共有方法

1. **GitHub Pagesにデプロイ**
   ```bash
   # GitHubリポジトリを作成
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/[username]/js-auto-grader
   git push -u origin main
   
   # GitHub → Settings → Pages → Deploy from a branch → main
   ```

2. **URLを共有**
   ```
   https://[username].github.io/problem
   ```

3. **使用手順**
   - URLにアクセス
   - カテゴリタブから問題分野を選択
   - 問題リストから解きたい問題をクリック
   - コードを編集（穴埋め部分を完成）
   - 「🚀 コードを実行して採点」ボタンをクリック
   - 即座に採点結果を確認

### 学習者の使い方

1. **カテゴリ選択**: タブをクリックして問題カテゴリを選択（オブジェクト・関数など）
2. **問題選択**: カテゴリ内の問題リストから解きたい問題をクリック
3. **コード編集**: 表示されたテンプレートの穴埋め部分を完成させる
4. **実行**: 実行ボタンまたは `Ctrl+Enter` で採点
5. **結果確認**: 
   - ✅ 全テストケース合格: 緑色で100点表示
   - ⚠️ 一部テストケース不合格: 黄色で部分点表示
   - ❌ 全テストケース不合格: 赤色で0点表示
   - 📊 詳細表示: 各テストケースの個別結果をクリックで展開

## 🔧 システム構成

```
├── index.html              # メニューページ（ツール選択）
├── grader.html             # 自動採点システム
├── visualizer.html         # コード可視化ツール
├── css/
│   └── style.css          # 統合スタイルシート（レスポンシブ対応）
├── js/
│   ├── navigation.js        # 共通ナビゲーション機能
│   ├── main.js              # 採点システムメイン（可視化連携含む）
│   ├── problemLoader.js     # 問題遅延読み込みシステム
│   └── worker.js            # Web Worker（安全なコード実行）
├── problems/                # 問題データ（JSON個別管理）
│   ├── index.json           # 問題一覧メタデータ
│   ├── practice21.json      # 個別問題ファイル
│   ├── practice22.json
│   └── ...
└── README.md              # このファイル
```

## 🛡️ セキュリティ機能

- **Web Worker分離**: ユーザーコードを安全な環境で実行
- **タイムアウト制御**: 5秒で自動停止（無限ループ対策）
- **スコープ分離**: グローバル変数の汚染防止
- **エラーハンドリング**: 実行エラーの安全な処理

## 📝 新しい問題の追加方法

### 🆕 新しいJSON形式（推奨）

1. **個別問題ファイル作成**
   ```json
   // problems/practice26.json
   {
     "id": "practice26",
     "title": "新しい問題のタイトル",
     "description": "問題の説明",
     "instructions": ["実装のポイント1", "実装のポイント2"],
     "template": "// コードテンプレート\\nlet example = \"Hello, World!\";\\nconsole.log(example);",
     "testCases": [
       {
         "name": "基本ケース",
         "variables": { "example": "Hello, World!" },
         "expectedOutput": "Hello, World!"
       },
       {
         "name": "別のケース", 
         "variables": { "example": "こんにちは" },
         "expectedOutput": "こんにちは"
       }
       // 最大5つまでのテストケースを追加可能
     ],
     "expectedOutput": "Hello, World!",
     "testVariables": { "example": "Hello, World!" },
     "points": 100
   }
   ```

2. **`problems/index.json`を更新**
   ```json
   {
     "version": "1.0.0",
     "problems": [
       // 既存の問題...
       {
         "id": "practice26",
         "title": "新しい問題のタイトル",
         "category": "基本",
         "difficulty": "初級",
         "points": 100
       }
     ]
   }
   ```

3. **GitHubにプッシュ**
   ```bash
   git add problems/practice26.json problems/index.json
   git commit -m "Add practice26"
   git push
   ```

4. **自動的に反映** - GitHub Pagesで即座に利用可能

## 📚 問題構成

現在25問の練習問題を以下のカテゴリに分けて提供しています：

### 📦 オブジェクト（5問）
- 商品情報の表示
- ユーザー情報の更新
- undefinedの処理
- 商品の割引計算
- テスト結果の評価システム

### ⚡ 関数（20問）
- 関数の基本呼び出し
- 引数を持つ関数
- 複数引数の関数
- 戻り値の活用
- アロー関数の基本
- 関数と配列
- 関数とオブジェクト
- 関数と条件分岐
- 関数とループ
- スコープの理解
- 各テーマの復習問題（10問）

## 🌟 高度な機能

### タブ型UI
- **カテゴリ別整理**: 問題をオブジェクト・関数などのカテゴリごとに整理
- **視認性向上**: 25問に増加した問題を見やすく表示
- **直感的操作**: タブクリックでカテゴリ切り替え、ボタンクリックで問題選択
- **レスポンシブ対応**: モバイルでの横スクロール対応

### 遅延読み込みシステム
- **初期ロード最適化**: 問題一覧のみを最初に読み込み
- **選択時読み込み**: 問題選択時に詳細データを動的取得
- **インメモリキャッシュ**: 一度読み込んだ問題はキャッシュで高速アクセス
- **エラーハンドリング**: ネットワークエラー時の適切なユーザーフィードバック

### キーボードショートカット
- `Ctrl+Enter` (または `Cmd+Enter`): コード実行

### 採点機能
- **console.log出力の完全キャプチャ**
- **複数テストケース実行**: 基本・境界値・エラーケースなど5パターンで検証
- **動的変数置換**: テストケースごとに異なる変数値で自動実行
- **詳細な採点結果**: 個別テスト結果と進捗バーによる視覚的表示
- **文字単位での厳密な比較**
- **行ごとの詳細な差異表示**
- **実行時エラーの詳細表示**
- **展開式詳細表示**: クリックで各テストケースの詳細を確認可能

### レスポンシブデザイン
- デスクトップ: サイドバイサイドレイアウト
- モバイル: 縦積みレイアウト、タブの横スクロール対応
- ダークモード対応
- タッチ操作の最適化

## 🔄 今後の拡張案

- [ ] コード実行履歴の保存
- [x] 複数テストケースの対応 ✨ **実装完了**
- [x] JSONファイル個別管理と遅延読み込み ✨ **実装完了**
- [x] コード可視化ツールの統合 ✨ **実装完了**
- [x] ツール間のシームレス連携 ✨ **実装完了**
- [x] タブ型UIによるカテゴリ別問題整理 ✨ **実装完了**
- [ ] 実行時間とメモリ使用量の表示
- [ ] 問題の難易度表示
- [ ] 進捗管理機能
- [ ] より高度な可視化機能（関数呼び出しスタックなど）
- [ ] コードの共有・保存機能
- [ ] 新しいカテゴリの追加（配列、条件分岐、ループなど）

## 🐛 トラブルシューティング

### よくある問題

1. **「問題の読み込みに失敗しました」エラー**
   - ネットワーク接続を確認してください
   - ページを再読み込みしてみてください
   - サーバーが正常に動作しているか確認してください

2. **「Web Workerをサポートしていません」エラー**
   - 古いブラウザを使用している可能性があります
   - Chrome、Firefox、Safari、Edgeの最新版を使用してください

3. **実行ボタンが反応しない**
   - 問題が正常に選択・読み込みされているか確認してください
   - ブラウザのコンソールにエラーがないか確認してください

4. **コードが実行されない**
   - 構文エラーがないか確認してください
   - 5秒でタイムアウトするため、無限ループに注意してください
