# 🚀 JavaScript自動採点システム

プログラミング学習用に作られた、ブラウザで動作する自動採点システムです。

## ✨ 特徴

- **🌐 ブラウザだけで動作**: インストール不要、URLにアクセスするだけ
- **🔒 セキュア**: Web Workerによる安全な実行環境
- **📱 レスポンシブ**: PC・スマホ・タブレット対応
- **⚡ 高速**: リアルタイムでの採点結果表示
- **🧪 多角的テスト**: 複数テストケースによる包括的な採点
- **🎨 美しいUI**: 直感的で使いやすいデザイン

## 🎯 対応問題

現在以下の練習問題に対応しています：

1. **practice21**: 電車の乗車券料金計算
2. **practice22**: 図書館延滞料金計算  
3. **practice23**: 成績統計計算
4. **practice24**: 映画館座席予約システム
5. **practice25**: 釣り銭計算プログラム

## 🚀 使い方

### 共有方法

1. **GitHub Pagesにデプロイ**
   ```bash
   # GitHubリポジトリを作成
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/[username]/js-auto-grader
   git push -u origin main
   
   # GitHub → Settings → Pages → Deploy from a branch → main
   ```

2. **URLを共有**
   ```
   https://[username].github.io/problem
   ```

3. **使用手順**
   - URLにアクセス
   - 問題を選択
   - コードを編集（穴埋め部分を完成）
   - 「🚀 コードを実行して採点」ボタンをクリック
   - 即座に採点結果を確認

### 学習者の使い方

1. **問題選択**: ドロップダウンから解きたい問題を選択
2. **コード編集**: 表示されたテンプレートの穴埋め部分を完成させる
3. **実行**: 実行ボタンまたは `Ctrl+Enter` で採点
4. **結果確認**: 
   - ✅ 全テストケース合格: 緑色で100点表示
   - ⚠️ 一部テストケース不合格: 黄色で部分点表示
   - ❌ 全テストケース不合格: 赤色で0点表示
   - 📊 詳細表示: 各テストケースの個別結果をクリックで展開

## 🔧 システム構成

```
github-pages-grader/
├── index.html              # メインページ
├── css/
│   └── style.css          # スタイルシート（複数テストケース対応UI含む）
├── js/
│   ├── main.js            # メインアプリケーション（採点ロジック強化）
│   ├── worker.js          # Web Worker（動的変数置換機能付き）
│   └── problems.js        # 問題データ（testCases形式対応）
└── README.md              # このファイル
```

## 🛡️ セキュリティ機能

- **Web Worker分離**: ユーザーコードを安全な環境で実行
- **タイムアウト制御**: 5秒で自動停止（無限ループ対策）
- **スコープ分離**: グローバル変数の汚染防止
- **エラーハンドリング**: 実行エラーの安全な処理

## 📝 新しい問題の追加方法

1. **`js/problems.js`を編集**
   ```javascript
   const PROBLEMS = {
     // 既存の問題...
     
     practice26: {
       id: "practice26",
       title: "新しい問題のタイトル",
       description: "問題の説明",
       instructions: ["実装のポイント1", "実装のポイント2"],
       template: `// コードテンプレート
   let example = "Hello, World!";
   console.log(example);`,
       
       // 新しい複数テストケース形式（推奨）
       testCases: [
         {
           name: "基本ケース",
           variables: { example: "Hello, World!" },
           expectedOutput: "Hello, World!"
         },
         {
           name: "別のケース", 
           variables: { example: "こんにちは" },
           expectedOutput: "こんにちは"
         }
         // 最大5つまでのテストケースを追加可能
       ],
       
       // 後方互換性のための旧形式（オプション）
       expectedOutput: "Hello, World!",
       testVariables: { example: "Hello, World!" },
       points: 100
     }
   };
   ```

2. **GitHubにプッシュ**
   ```bash
   git add js/problems.js
   git commit -m "Add practice26"
   git push
   ```

3. **自動的に反映** - GitHub Pagesで即座に利用可能

## 🌟 高度な機能

### キーボードショートカット
- `Ctrl+Enter` (または `Cmd+Enter`): コード実行

### 採点機能
- **console.log出力の完全キャプチャ**
- **複数テストケース実行**: 基本・境界値・エラーケースなど5パターンで検証
- **動的変数置換**: テストケースごとに異なる変数値で自動実行
- **詳細な採点結果**: 個別テスト結果と進捗バーによる視覚的表示
- **文字単位での厳密な比較**
- **行ごとの詳細な差異表示**
- **実行時エラーの詳細表示**
- **展開式詳細表示**: クリックで各テストケースの詳細を確認可能

### レスポンシブデザイン
- デスクトップ: サイドバイサイドレイアウト
- モバイル: 縦積みレイアウト
- ダークモード対応

## 🔄 今後の拡張案

- [ ] コード実行履歴の保存
- [x] 複数テストケースの対応 ✨ **実装完了**
- [ ] 実行時間とメモリ使用量の表示
- [ ] 問題の難易度表示
- [ ] 進捗管理機能

## 🐛 トラブルシューティング

### よくある問題

1. **「Web Workerをサポートしていません」エラー**
   - 古いブラウザを使用している可能性があります
   - Chrome、Firefox、Safari、Edgeの最新版を使用してください

2. **実行ボタンが反応しない**
   - 問題が選択されているか確認してください
   - ブラウザのコンソールにエラーがないか確認してください

3. **コードが実行されない**
   - 構文エラーがないか確認してください
   - 5秒でタイムアウトするため、無限ループに注意してください

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能要望は、GitHubのIssuesでお知らせください。
プルリクエストも歓迎します！

---

**💡 ヒント**: 友達がより良い学習体験を得られるよう、定期的に新しい問題を追加することをお勧めします。
