{
  "id": "js-advanced-25",
  "title": "まとめ練習 - フォーム プレビュー + バリデーション",
  "description": "入力に連動したプレビューと、必須/形式チェックに基づく送信ボタン制御・送信状態更新を実装します",
  "category": "javascript-advanced",
  "instructions": [
    "入力のたびにプレビュー（#pvName/#pvEmail/#pvMsg）を更新する",
    "お名前/メールは必須。メールは簡易的な正規表現で形式チェックする",
    "エラーは #errorList の <li> として列挙する",
    "エラーが無ければ #submitBtn を有効化し、送信時に #statusText を『送信完了』にする"
  ],
  "files": {
    "html": {
      "template": "<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>js-advanced-25 まとめ練習 - フォーム プレビュー + バリデーション</title>\n  <link rel=\"stylesheet\" href=\"style.css\" />\n</head>\n<body>\n  <div class=\"container\">\n    <h1>まとめ練習 - フォーム プレビュー + バリデーション</h1>\n\n    <form id=\"contactForm\" novalidate>\n      <div class=\"field\">\n        <label for=\"nameInput\">お名前</label>\n        <input id=\"nameInput\" type=\"text\" placeholder=\"山田 太郎\" required />\n      </div>\n      <div class=\"field\">\n        <label for=\"emailInput\">メール</label>\n        <input id=\"emailInput\" type=\"email\" placeholder=\"taro@example.com\" required />\n      </div>\n      <div class=\"field\">\n        <label for=\"msgInput\">メッセージ</label>\n        <textarea id=\"msgInput\" rows=\"4\" placeholder=\"お問い合わせ内容\"></textarea>\n      </div>\n      <div class=\"actions\">\n        <button id=\"submitBtn\" type=\"submit\" disabled>送信</button>\n        <span id=\"statusText\" class=\"meta\">未送信</span>\n      </div>\n    </form>\n\n    <div class=\"preview\" aria-live=\"polite\">\n      <h2>プレビュー</h2>\n      <div>お名前: <span id=\"pvName\">-</span></div>\n      <div>メール: <span id=\"pvEmail\">-</span></div>\n      <div>メッセージ: <span id=\"pvMsg\">-</span></div>\n      <ul id=\"errorList\" class=\"errors\"></ul>\n    </div>\n  </div>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>\n",
      "expected": "__INCLUDE__: problems/frontend/expected/js-advanced-25/files.html.expected"
    },
    "css": {
      "template": "body{font-family:system-ui,-apple-system,\\\"Segoe UI\\\",sans-serif;margin:16px}\\n.container{max-width:720px;margin:auto}\\n.field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}\\ninput,textarea{padding:8px;border:1px solid #ccc;border-radius:6px}\\n.actions{display:flex;gap:12px;align-items:center;margin-top:8px}\\nbutton{padding:8px 12px;border:1px solid #ccc;border-radius:6px;background:#f8f8f8}\\n.meta{color:#666}\\n.preview{margin-top:16px;padding:12px;border:1px solid #e5e7eb;border-radius:8px;background:#fff}\\n.errors{margin-top:8px;color:#b91c1c}\\n",
      "expected": "__INCLUDE__: problems/frontend/expected/js-advanced-25/files.css.expected"
    },
    "js": {
      "template": "const $name = document.getElementById('nameInput');\nconst $email = document.getElementById('emailInput');\nconst $msg = document.getElementById('msgInput');\nconst $pvName = document.getElementById('pvName');\nconst $pvEmail = document.getElementById('pvEmail');\nconst $pvMsg = document.getElementById('pvMsg');\nconst $errors = document.getElementById('errorList');\nconst $status = document.getElementById('statusText');\nconst $form = document.getElementById('contactForm');\nconst $submit = document.getElementById('submitBtn');\n\nfunction renderPreview(){\n  $pvName.textContent = ($name.value || '').trim() || '-';\n  $pvEmail.textContent = ($email.value || '').trim() || '-';\n  $pvMsg.textContent = ($msg.value || '').trim() || '-';\n}\n\nfunction validate(){\n  const errs = [];\n  const name = ($name.value || '').trim();\n  const email = ($email.value || '').trim();\n\n  if (!name) errs.push('お名前は必須です');\n  if (!email) {\n    errs.push('メールは必須です');\n  } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n    errs.push('メールの形式が正しくありません');\n  }\n\n  $errors.innerHTML = '';\n  for (const e of errs) {\n    const li = document.createElement('li');\n    li.textContent = e;\n    $errors.appendChild(li);\n  }\n\n  $submit.disabled = errs.length > 0;\n  return errs.length === 0;\n}\n\nfunction onInput(){\n  renderPreview();\n  validate();\n}\n\n$name.addEventListener('input', onInput);\n$email.addEventListener('input', onInput);\n$msg.addEventListener('input', onInput);\n\n$form.addEventListener('submit', (ev) => {\n  ev.preventDefault();\n  if (!validate()) return;\n  $status.textContent = '送信完了';\n});\n\nrenderPreview();\nvalidate();\n",
      "expected": "__INCLUDE__: problems/frontend/expected/js-advanced-25/files.js.expected"
    }
  },
  "checks": [
    { "id": "doctype", "name": "DOCTYPE宣言", "type": "structure", "message": "DOCTYPE html宣言が必要です" },
    { "id": "html", "name": "<html>タグ", "type": "structure", "message": "<html>タグが必要です" },
    { "id": "head", "name": "<head>セクション", "type": "structure", "message": "<head>セクションが必要です" },
    { "id": "body", "name": "<body>セクション", "type": "structure", "message": "<body>セクションが必要です" },
    { "id": "title", "name": "<title>タグ", "type": "structure", "message": "<title>タグと内容が必要です" },
    { "id": "css-content", "name": "CSSスタイル", "type": "css", "message": "CSSでスタイルを設定してください" },
    { "id": "js-content", "name": "JavaScript", "type": "js", "message": "JavaScriptで動的な動作を実装してください" }
  ]
}
