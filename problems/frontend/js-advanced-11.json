{
  "id": "js-advanced-11",
  "title": "関数実用システム",
  "description": "複数の関数を組み合わせた実用的なシステムを構築し、関数の再利用性と連携について理解します",
  "category": "javascript-advanced",
  "difficulty": 3,
  "instructions": [
    "複数関数の連携方法を学ぶ",
    "実用的な計算システム（BMI計算等）を構築する",
    "関数の再利用性の理解を深める",
    "アロー関数の基本的な使い方を習得する"
  ],
  "files": {
    "html": {
      "template": "<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>課題実装</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h1>課題を実装してください</h1>\n        <!-- ここに実装してください -->\n    </div>\n    \n    <script src=\"script.js\"></script>\n</body>\n</html>",
      "expected": "<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>関数ミニシステム</title>\n  <style>\n    body{font-family:system-ui, -apple-system, 'Segoe UI', sans-serif;margin:20px}\n    .box{border:1px solid #ddd;border-radius:8px;padding:12px;margin-bottom:16px}\n    label{display:inline-block;min-width:110px}\n    button{margin-top:8px;padding:6px 12px}\n    .out{margin-top:8px;font-weight:bold}\n  </style>\n</head>\n<body>\n  <h1>関数ミニシステム</h1>\n\n  <div class=\"box\">\n    <h2>BMI計算</h2>\n    <div><label for=\"h\">身長(cm)</label><input id=\"h\" type=\"number\" value=\"170\"></div>\n    <div><label for=\"w\">体重(kg)</label><input id=\"w\" type=\"number\" value=\"60\"></div>\n    <button id=\"bmiBtn\">計算</button>\n    <div class=\"out\" id=\"bmiOut\"></div>\n  </div>\n\n  <div class=\"box\">\n    <h2>関数連携（税計算）</h2>\n    <div><label for=\"amount\">金額</label><input id=\"amount\" type=\"number\" value=\"1000\"></div>\n    <button id=\"chainBtn\">計算</button>\n    <div class=\"out\" id=\"chainOut\"></div>\n  </div>\n\n  <script>\n    // BMI: cm/kg -> 1桁小数\n    const calcBMI = (cm, kg) => (kg / (cm/100) ** 2);\n    const bmiCategory = (bmi) => bmi < 18.5 ? '低体重' : bmi < 25 ? '普通体重' : '肥満';\n\n    document.getElementById('bmiBtn').addEventListener('click', () => {\n      const h = parseFloat(document.getElementById('h').value);\n      const w = parseFloat(document.getElementById('w').value);\n      if (!h || !w) {\n        document.getElementById('bmiOut').textContent = '数値を入力してください';\n        return;\n      }\n      const bmi = calcBMI(h, w);\n      document.getElementById('bmiOut').textContent = `BMI: ${bmi.toFixed(1)} (${bmiCategory(bmi)})`;\n    });\n\n    // 関数連携: validate -> tax -> total\n    const valid = n => !isNaN(n) && n > 0;\n    const tax = n => Math.round(n * 0.1);\n    const total = (n, t) => n + t;\n\n    document.getElementById('chainBtn').addEventListener('click', () => {\n      const n = parseFloat(document.getElementById('amount').value);\n      if (!valid(n)) {\n        document.getElementById('chainOut').textContent = '正しい金額を入力してください';\n        return;\n      }\n      const t = tax(n);\n      const sum = total(n, t);\n      document.getElementById('chainOut').textContent = `税: ${t}円 / 合計: ${sum}円`;\n    });\n  </script>\n</body>\n</html>"
    },
    "css": {
      "template": "/* 基本的なスタイル */\nbody {\n    font-family: Arial, sans-serif;\n    margin: 40px;\n    background: #f5f5f5;\n}\n\n.container {\n    max-width: 800px;\n    margin: 0 auto;\n    background: white;\n    padding: 20px;\n    border-radius: 10px;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n/* ここに実装してください */",
      "expected": "body{font-family:system-ui,-apple-system,'Segoe UI',sans-serif;margin:20px}\n.box{border:1px solid #ddd;border-radius:8px;padding:12px;margin-bottom:16px}\nlabel{display:inline-block;min-width:110px}\nbutton{margin-top:8px;padding:6px 12px}\n.out{margin-top:8px;font-weight:bold}"
    },
    "js": {
      "template": "// JavaScript実装エリア\n\n// ここに実装してください\nconsole.log('課題実装を開始してください');",
      "expected": "// BMI\nconst calcBMI=(cm,kg)=>kg/((cm/100)**2);\nconst bmiCategory=b=>b<18.5?'低体重':b<25?'普通体重':'肥満';\n\ndocument.getElementById('bmiBtn').addEventListener('click',()=>{\n  const h=parseFloat(document.getElementById('h').value);\n  const w=parseFloat(document.getElementById('w').value);\n  if(!h||!w){document.getElementById('bmiOut').textContent='数値を入力してください';return;}\n  const bmi=calcBMI(h,w);\n  document.getElementById('bmiOut').textContent=`BMI: ${bmi.toFixed(1)} (${bmiCategory(bmi)})`;\n});\n\n// 関数連携\nconst valid=n=>!isNaN(n)&&n>0;\nconst tax=n=>Math.round(n*0.1);\nconst total=(n,t)=>n+t;\n\ndocument.getElementById('chainBtn').addEventListener('click',()=>{\n  const n=parseFloat(document.getElementById('amount').value);\n  if(!valid(n)){document.getElementById('chainOut').textContent='正しい金額を入力してください';return;}\n  const t=tax(n);\n  const sum=total(n,t);\n  document.getElementById('chainOut').textContent=`税: ${t}円 / 合計: ${sum}円`;\n});"
    }
  },
  "expectedResult": {
    "bmi": "ボタンでBMIが計算され表示される",
    "chain": "金額入力に対し税と合計が表示される",
    "behavior": "2つのボタン操作が正しく機能する"
  },
  "checks": [
    {
      "id": "doctype",
      "name": "DOCTYPE宣言",
      "type": "structure",
      "message": "DOCTYPE html宣言が必要です"
    },
    {
      "id": "html",
      "name": "<html>タグ",
      "type": "structure",
      "message": "<html>タグが必要です"
    },
    {
      "id": "head",
      "name": "<head>セクション",
      "type": "structure",
      "message": "<head>セクションが必要です"
    },
    {
      "id": "body",
      "name": "<body>セクション",
      "type": "structure",
      "message": "<body>セクションが必要です"
    },
    {
      "id": "title",
      "name": "<title>タグ",
      "type": "structure",
      "message": "<title>タグと内容が必要です"
    },
    {
      "id": "css-content",
      "name": "CSSスタイル",
      "type": "css",
      "message": "CSSでスタイルを設定してください"
    },
    {
      "id": "js-content",
      "name": "JavaScript",
      "type": "js",
      "message": "JavaScriptで動的な動作を実装してください"
    }
  ]
}