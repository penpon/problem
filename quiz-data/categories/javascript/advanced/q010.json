{
  "id": "js_advanced_010",
  "version": "1.0",
  "category": "javascript",
  "level": "advanced",
  "tags": ["practical", "complex-operation", "method-chaining", "real-world"],
  "question": {
    "text": "完了済みコースの平均評価点が4.0以上の受講生名を取得する正しい処理手順は？\n\n1. 各受講生の完了済みコースを抽出\n2. 完了済みコースの平均評価点を計算\n3. 平均4.0以上の受講生を選択\n4. 受講生の名前を取得",
    "hint": "filter、map、reduceを組み合わせた複合的な配列操作が必要です",
    "animation": {
      "type": "code_typing",
      "duration": 3000
    },
    "visual": {
      "type": "code_editor",
      "content": "// 学習プラットフォームのデータ分析\nconst students = [\n  {\n    name: '田中太郎',\n    courses: [\n      {title: 'JavaScript基礎', completed: true, rating: 4.2},\n      {title: 'React応用', completed: true, rating: 4.5},\n      {title: 'Node.js', completed: false, rating: null}\n    ]\n  },\n  {\n    name: '佐藤花子', \n    courses: [\n      {title: 'HTML/CSS', completed: true, rating: 3.8},\n      {title: 'JavaScript基礎', completed: true, rating: 3.9}\n    ]\n  }\n];\n\n// 正しい処理手順を選択してください"
    }
  },
  "choices": [
    {
      "id": "A",
      "text": "filter(完了済み) → reduce(平均計算) → filter(4.0以上) → map(名前)",
      "animation": "slide_in_left"
    },
    {
      "id": "B",
      "text": "map(名前) → filter(全コース4.0以上)",
      "animation": "slide_in_right"
    },
    {
      "id": "C",
      "text": "filter(完了済み4.0以上のコースあり)",
      "animation": "slide_in_left"
    },
    {
      "id": "D",
      "text": "find(4.0以上コースあり) → map(名前)",
      "animation": "slide_in_right"
    }
  ],
  "correct": "A",
  "explanation": {
    "text": "複雑なデータ分析では段階的な処理が必要です。①完了済みコースをfilter、②評価点の平均をreduce、③条件を満たす受講生をfilter、④名前をmapで抽出。実際のWebアプリ開発でよく使われるパターンです。",
    "example": "// 売上データから高売上店舗を抽出\nconst stores = [{name: 'A店', sales: [100, 200, 300]}];\nconst highPerform = stores\n  .filter(store => {\n    const avg = store.sales.reduce((a,b) => a+b) / store.sales.length;\n    return avg >= 200;\n  })\n  .map(store => store.name);",
    "relatedCommands": ["reduce", "every", "some"],
    "furtherReading": "実践的な配列操作では、データの構造を理解し段階的に処理を組み立てることが重要です。"
  },
  "difficulty": {
    "score": 6,
    "timeLimit": 90,
    "points": 35
  },
  "statistics": {
    "attempts": 0,
    "correctRate": 0
  }
}