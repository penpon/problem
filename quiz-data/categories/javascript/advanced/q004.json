{
  "id": "js_advanced_004",
  "version": "1.0",
  "category": "javascript",
  "level": "advanced",
  "tags": ["forEach", "advanced", "index", "array"],
  "question": {
    "text": "管理画面でユーザー一覧を表示する際、各ユーザーに連番（1から始まる）を付けて出力したい場合のforEachの正しい使用法は？",
    "hint": "forEachのコールバック関数は第2引数でインデックスを取得できます",
    "animation": {
      "type": "code_typing",
      "duration": 2000
    },
    "visual": {
      "type": "code_editor",
      "content": "// ユーザー一覧に連番を付けて表示\nconst users = [\n  {name: '田中太郎', email: 'tanaka@example.com'},\n  {name: '佐藤花子', email: 'sato@example.com'},\n  {name: '鈴木一郎', email: 'suzuki@example.com'}\n];\n// 出力例: 1. 田中太郎 (tanaka@example.com)"
    }
  },
  "choices": [
    {
      "id": "A",
      "text": "users.forEach((user, index) => console.log(`${index + 1}. ${user.name} (${user.email})`));",
      "animation": "slide_in_left"
    },
    {
      "id": "B",
      "text": "users.forEach((user) => console.log(`${user.index + 1}. ${user.name} (${user.email})`));",
      "animation": "slide_in_right"
    },
    {
      "id": "C",
      "text": "users.forEach((user, i) => console.log(`${i}. ${user.name} (${user.email})`));",
      "animation": "slide_in_left"
    },
    {
      "id": "D",
      "text": "users.forEach((user) => console.log(`${user.number}. ${user.name} (${user.email})`));",
      "animation": "slide_in_right"
    }
  ],
  "correct": "A",
  "explanation": {
    "text": "forEachのコールバック関数は3つの引数を受け取ります：現在の要素、インデックス、配列全体。インデックスは0から始まるため、連番表示には+1が必要です。",
    "example": "const items = ['apple', 'banana', 'orange'];\nitems.forEach((item, index, array) => {\n  console.log(`${index + 1}. ${item}`);\n  // array は元の配列への参照\n});",
    "relatedCommands": ["map", "entries", "keys"],
    "furtherReading": "forEachの第2引数のインデックスは、順序付きリストの表示や条件分岐に活用できます。"
  },
  "difficulty": {
    "score": 5,
    "timeLimit": 60,
    "points": 25
  },
  "statistics": {
    "attempts": 0,
    "correctRate": 0
  }
}