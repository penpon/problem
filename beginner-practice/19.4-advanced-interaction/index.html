<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>19.4 ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³é«˜åº¦åŒ– - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å­¦ç¿’</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        /* å•†å“ã‚«ãƒ¼ãƒ‰ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .product-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        /* ç”»åƒåˆ‡æ›¿ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°æ©Ÿèƒ½ï¼‰ */
        .image-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .product-image {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .product-image:hover {
            transform: scale(1.1);
        }

        .image-1 { background: linear-gradient(45deg, #ff6b6b, #4ecdc4); }
        .image-2 { background: linear-gradient(45deg, #a8e6cf, #ffd3a5); }
        .image-3 { background: linear-gradient(45deg, #84fab0, #8fd3f4); }

        /* ç”»åƒåˆ‡æ›¿ãƒœã‚¿ãƒ³ */
        .image-controls {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .image-btn {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-btn.active {
            background: #3498db;
            transform: scale(1.3);
        }

        .image-btn:hover {
            background: #3498db;
            opacity: 0.7;
        }

        .product-info h2 {
            color: #333;
            font-size: 18px;
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }

        .product-price {
            font-size: 20px;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .product-price:hover {
            transform: scale(1.05);
        }

        /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            flex: 1;
            max-width: 90px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: width 0.6s, height 0.6s;
            transform: translate(-50%, -50%);
            z-index: 0;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn > span {
            position: relative;
            z-index: 1;
        }

        .btn-like {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #ddd;
        }

        .btn-like.liked {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
            animation: pulse 0.6s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        .btn-details {
            background: #3498db;
            color: white;
        }

        .btn-cart {
            background: #27ae60;
            color: white;
        }

        .btn-cart.in-cart {
            background: #f39c12;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* å•†å“è©³ç´°ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .product-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
            text-align: left;
        }

        .product-details.show {
            opacity: 1;
            max-height: 200px;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-details h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .product-details p {
            color: #666;
            font-size: 11px;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        /* é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°æ©Ÿèƒ½ï¼‰ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.error {
            background: #e74c3c;
        }

        .notification.info {
            background: #3498db;
        }

        /* å­¦ç¿’ãƒ‘ãƒãƒ«ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .learning-panel {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: fadeInUp 0.8s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel-title {
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        /* çµ±è¨ˆè¡¨ç¤ºï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stat-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .stat-number {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 3px;
            transition: transform 0.3s ease;
        }

        .stat-item:hover .stat-number {
            transform: scale(1.2);
        }

        .stat-label {
            font-size: 10px;
            opacity: 0.9;
        }

        /* å„ç¨®è¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .display-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .display-section:hover {
            background: #e9ecef;
        }

        .section-title {
            font-size: 11px;
            color: #666;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .content-area {
            font-size: 10px;
            line-height: 1.3;
            max-height: 80px;
            overflow-y: auto;
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰ */
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn-control {
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .btn-control:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .btn-control:active {
            transform: scale(0.95);
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
        }

        .btn-demo {
            background: #9b59b6;
            color: white;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: translateY(-100%);
            }
            
            .notification.show {
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  -->
    <div class="notification" id="notification"></div>

    <div class="container">
        <!-- å•†å“ã‚«ãƒ¼ãƒ‰ -->
        <div class="product-card">
            <!-- ç”»åƒåˆ‡æ›¿ã‚·ã‚¹ãƒ†ãƒ  -->
            <div class="image-container">
                <div class="product-image image-1" id="productImage">ğŸ‘•</div>
            </div>
            
            <!-- ç”»åƒåˆ‡æ›¿ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
            <div class="image-controls">
                <button class="image-btn active" data-image="1"></button>
                <button class="image-btn" data-image="2"></button>
                <button class="image-btn" data-image="3"></button>
            </div>
            
            <div class="product-info">
                <h2 id="productName">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ  Tã‚·ãƒ£ãƒ„</h2>
                <div class="product-price">Â¥<span id="productPrice">2,980</span></div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-like" id="likeBtn">
                    <span>â¤ï¸ <span id="likeCount">0</span></span>
                </button>
                <button class="btn btn-details" id="detailsBtn">
                    <span>ğŸ“ è©³ç´°</span>
                </button>
                <button class="btn btn-cart" id="cartBtn">
                    <span>ğŸ›’ ã‚«ãƒ¼ãƒˆ</span>
                </button>
            </div>
            
            <div class="product-details" id="productDetails">
                <h3>å•†å“è©³ç´°æƒ…å ±</h3>
                <p><strong>ç´ æ:</strong> ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚³ãƒƒãƒˆãƒ³100%ä½¿ç”¨</p>
                <p><strong>ã‚µã‚¤ã‚º:</strong> S/M/L/XL ã®è±Šå¯Œãªã‚µã‚¤ã‚ºå±•é–‹</p>
                <p><strong>ã‚«ãƒ©ãƒ¼:</strong> 4è‰²ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</p>
                <p><strong>ç‰¹å¾´:</strong> è‚Œè§¦ã‚ŠæŠœç¾¤ã§é•·æŒã¡ã™ã‚‹é«˜å“è³ªç´ æ</p>
                <p><strong>ãŠæ‰‹å…¥ã‚Œ:</strong> æ´—æ¿¯æ©Ÿä½¿ç”¨å¯ã€å‹å´©ã‚Œã—ã«ãã„è¨­è¨ˆ</p>
            </div>
        </div>
        
        <!-- å­¦ç¿’ãƒ‘ãƒãƒ« -->
        <div class="learning-panel">
            <h2 class="panel-title">ğŸ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰</h2>
            
            <!-- çµ±è¨ˆè¡¨ç¤º -->
            <div class="stats-grid">
                <div class="stat-item" title="ã„ã„ã­ã®ç·æ•°">
                    <div class="stat-number" id="totalLikes">0</div>
                    <div class="stat-label">ã„ã„ã­æ•°</div>
                </div>
                <div class="stat-item" title="è©³ç´°è¡¨ç¤ºå›æ•°">
                    <div class="stat-number" id="totalViews">0</div>
                    <div class="stat-label">è©³ç´°è¡¨ç¤º</div>
                </div>
                <div class="stat-item" title="ã‚«ãƒ¼ãƒˆæ“ä½œå›æ•°">
                    <div class="stat-number" id="totalCart">0</div>
                    <div class="stat-label">ã‚«ãƒ¼ãƒˆæ“ä½œ</div>
                </div>
                <div class="stat-item" title="ç”»åƒå¤‰æ›´å›æ•°">
                    <div class="stat-number" id="totalImageChanges">0</div>
                    <div class="stat-label">ç”»åƒåˆ‡æ›¿</div>
                </div>
            </div>
            
            <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹è¡¨ç¤º -->
            <div class="display-section">
                <div class="section-title">ğŸ¬ æœ€æ–°ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</div>
                <div class="content-area" id="animationDisplay">
                    ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†
                </div>
            </div>
            
            <!-- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¡¨ç¤º -->
            <div class="display-section">
                <div class="section-title">ğŸ’¾ ä¿å­˜ãƒ‡ãƒ¼ã‚¿</div>
                <div class="content-area" id="objectDisplay">
                    èª­ã¿è¾¼ã¿ä¸­...
                </div>
            </div>
            
            <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ -->
            <div class="control-buttons">
                <button class="btn-control btn-reset" id="resetBtn">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                <button class="btn-control btn-demo" id="demoBtn">âœ¨ ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
            </div>
        </div>
    </div>

    <script>
        // === 19.4 ãƒ¡ã‚¤ãƒ³å­¦ç¿’ãƒ†ãƒ¼ãƒ: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨UIåˆ¶å¾¡ ===

        // 1. å•†å“ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ19.3ã‹ã‚‰æ‹¡å¼µï¼‰
        let productData = {
            name: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ  Tã‚·ãƒ£ãƒ„",
            price: 2980,
            likes: 0,
            isLiked: false,
            showDetails: false,
            inCart: false,
            detailViews: 0,
            cartActions: 0,
            imageChanges: 0,         // ç”»åƒåˆ‡æ›¿å›æ•°ï¼ˆæ–°è¦è¿½åŠ ï¼‰
            currentImage: 1,         // ç¾åœ¨ã®ç”»åƒç•ªå·ï¼ˆæ–°è¦è¿½åŠ ï¼‰
            lastUpdated: new Date().toISOString()
        };

        let actionHistory = [];

        // 2. DOMè¦ç´ ã®å–å¾—
        const productImage = document.getElementById('productImage');
        const imageButtons = document.querySelectorAll('.image-btn');
        const likeBtn = document.getElementById('likeBtn');
        const detailsBtn = document.getElementById('detailsBtn');
        const cartBtn = document.getElementById('cartBtn');
        const productDetails = document.getElementById('productDetails');
        const notification = document.getElementById('notification');
        const likeCount = document.getElementById('likeCount');
        const totalLikes = document.getElementById('totalLikes');
        const totalViews = document.getElementById('totalViews');
        const totalCart = document.getElementById('totalCart');
        const totalImageChanges = document.getElementById('totalImageChanges');
        const animationDisplay = document.getElementById('animationDisplay');
        const objectDisplay = document.getElementById('objectDisplay');
        const resetBtn = document.getElementById('resetBtn');
        const demoBtn = document.getElementById('demoBtn');

        // 3. é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            // 3ç§’å¾Œã«è‡ªå‹•ã§éè¡¨ç¤º
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // 4. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°è¨˜éŒ²ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
        function logAnimation(action) {
            const timestamp = new Date().toLocaleTimeString();
            animationDisplay.textContent = `${timestamp}: ${action}`;
            console.log(`ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ${action}`);
        }

        // 5. ç”»åƒåˆ‡æ›¿ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°æ©Ÿèƒ½ - ãƒ¡ã‚¤ãƒ³å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆï¼‰
        function changeImage(imageNumber) {
            const images = ['ğŸ‘•', 'ğŸ‘”', 'ğŸ§¥']; // 3ç¨®é¡ã®å•†å“ç”»åƒ
            const imageClasses = ['image-1', 'image-2', 'image-3'];
            
            // ç¾åœ¨ã®ç”»åƒã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            productImage.className = 'product-image';
            
            // æ–°ã—ã„ç”»åƒã‚’è¨­å®šï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
            setTimeout(() => {
                productImage.className = `product-image ${imageClasses[imageNumber - 1]}`;
                productImage.textContent = images[imageNumber - 1];
                productData.currentImage = imageNumber;
                productData.imageChanges += 1;
                
                // ãƒœã‚¿ãƒ³ã®activeçŠ¶æ…‹ã‚’æ›´æ–°
                imageButtons.forEach((btn, index) => {
                    btn.classList.toggle('active', index + 1 === imageNumber);
                });
                
                logAnimation(`ç”»åƒã‚’ ${imageNumber} ç•ªã«åˆ‡æ›¿`);
                showNotification(`å•†å“ç”»åƒã‚’å¤‰æ›´ã—ã¾ã—ãŸ`, 'info');
                updateDisplay();
                saveData();
            }, 100);
        }

        // 6. ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ï¼ˆ19.3ã‹ã‚‰ç¶™ç¶šï¼‰
        function saveData() {
            try {
                productData.lastUpdated = new Date().toISOString();
                localStorage.setItem('productCardData_v4', JSON.stringify(productData));
                localStorage.setItem('productCardHistory_v4', JSON.stringify(actionHistory));
            } catch (error) {
                showNotification('ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
            }
        }

        function loadData() {
            try {
                const savedData = localStorage.getItem('productCardData_v4');
                if (savedData) {
                    productData = JSON.parse(savedData);
                    showNotification('ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ã¾ã—ãŸ', 'success');
                }

                const savedHistory = localStorage.getItem('productCardHistory_v4');
                if (savedHistory) {
                    actionHistory = JSON.parse(savedHistory);
                }
            } catch (error) {
                showNotification('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼', 'error');
                resetToDefaults();
            }
        }

        // 7. å±¥æ­´è¨˜éŒ²
        function addToHistory(action) {
            const timestamp = new Date().toLocaleTimeString();
            actionHistory.unshift(`${timestamp}: ${action}`);
            if (actionHistory.length > 5) {
                actionHistory = actionHistory.slice(0, 5);
            }
        }

        // 8. è¡¨ç¤ºæ›´æ–°
        function updateDisplay() {
            likeCount.textContent = productData.likes;
            
            if (productData.isLiked) {
                likeBtn.classList.add('liked');
            } else {
                likeBtn.classList.remove('liked');
            }
            
            if (productData.showDetails) {
                productDetails.classList.add('show');
                detailsBtn.innerHTML = '<span>ğŸ“ é–‰ã˜ã‚‹</span>';
            } else {
                productDetails.classList.remove('show');
                detailsBtn.innerHTML = '<span>ğŸ“ è©³ç´°</span>';
            }
            
            if (productData.inCart) {
                cartBtn.classList.add('in-cart');
                cartBtn.innerHTML = '<span>ğŸ›’ å‰Šé™¤</span>';
            } else {
                cartBtn.classList.remove('in-cart');
                cartBtn.innerHTML = '<span>ğŸ›’ ã‚«ãƒ¼ãƒˆ</span>';
            }

            // çµ±è¨ˆæ›´æ–°
            totalLikes.textContent = productData.likes;
            totalViews.textContent = productData.detailViews;
            totalCart.textContent = productData.cartActions;
            totalImageChanges.textContent = productData.imageChanges;

            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¡¨ç¤ºæ›´æ–°
            objectDisplay.innerHTML = `
                likes: ${productData.likes}<br>
                currentImage: ${productData.currentImage}<br>
                inCart: ${productData.inCart}<br>
                imageChanges: ${productData.imageChanges}
            `;

            // ç”»åƒçŠ¶æ…‹ã®å¾©å…ƒ
            changeImage(productData.currentImage);
        }

        // 9. ã„ã„ã­æ©Ÿèƒ½ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰
        function handleLike() {
            productData.isLiked = !productData.isLiked;
            productData.likes += productData.isLiked ? 1 : -1;
            
            addToHistory(productData.isLiked ? 'ã„ã„ã­ã—ã¾ã—ãŸ' : 'ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã—');
            logAnimation(productData.isLiked ? 'ãƒãƒ¼ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ' : 'ãƒãƒ¼ãƒˆé€šå¸¸çŠ¶æ…‹');
            showNotification(productData.isLiked ? 'â¤ï¸ ã„ã„ã­ã—ã¾ã—ãŸï¼' : 'ğŸ’” ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã—ã¾ã—ãŸ');
            
            updateDisplay();
            saveData();
        }

        // 10. è©³ç´°è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰
        function handleDetailsToggle() {
            productData.showDetails = !productData.showDetails;
            if (productData.showDetails) {
                productData.detailViews += 1;
                addToHistory('è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º');
                logAnimation('è©³ç´°ãƒ‘ãƒãƒ« ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ€ã‚¦ãƒ³');
                showNotification('ğŸ“ è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ');
            } else {
                addToHistory('è©³ç´°æƒ…å ±ã‚’é–‰ã˜ã‚‹');
                logAnimation('è©³ç´°ãƒ‘ãƒãƒ« ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒƒãƒ—');
                showNotification('ğŸ“ è©³ç´°æƒ…å ±ã‚’é–‰ã˜ã¾ã—ãŸ');
            }
            
            updateDisplay();
            saveData();
        }

        // 11. ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ï¼‰
        function handleCart() {
            productData.inCart = !productData.inCart;
            productData.cartActions += 1;
            
            addToHistory(productData.inCart ? 'ã‚«ãƒ¼ãƒˆã«è¿½åŠ ' : 'ã‚«ãƒ¼ãƒˆã‹ã‚‰å‰Šé™¤');
            logAnimation(productData.inCart ? 'ã‚«ãƒ¼ãƒˆãƒœã‚¿ãƒ³ ãƒã‚¦ãƒ³ã‚¹' : 'ã‚«ãƒ¼ãƒˆãƒœã‚¿ãƒ³ é€šå¸¸');
            showNotification(productData.inCart ? 'ğŸ›’ ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼' : 'ğŸ—‘ï¸ ã‚«ãƒ¼ãƒˆã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ');
            
            updateDisplay();
            saveData();
        }

        // 12. ãƒ‡ãƒ¢å®Ÿè¡Œæ©Ÿèƒ½ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
        function runDemo() {
            showNotification('âœ¨ ãƒ‡ãƒ¢ã‚’é–‹å§‹ã—ã¾ã™', 'info');
            logAnimation('è‡ªå‹•ãƒ‡ãƒ¢é–‹å§‹');
            
            // é€£ç¶šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
            setTimeout(() => changeImage(2), 1000);
            setTimeout(() => handleLike(), 2000);
            setTimeout(() => handleDetailsToggle(), 3000);
            setTimeout(() => handleCart(), 4000);
            setTimeout(() => changeImage(3), 5000);
            setTimeout(() => {
                showNotification('ğŸ‰ ãƒ‡ãƒ¢å®Œäº†ï¼', 'success');
                logAnimation('è‡ªå‹•ãƒ‡ãƒ¢å®Œäº†');
            }, 6000);
        }

        // 13. ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
        function handleReset() {
            if (confirm('å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('productCardData_v4');
                localStorage.removeItem('productCardHistory_v4');
                resetToDefaults();
                updateDisplay();
                showNotification('ğŸ”„ ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ', 'info');
                logAnimation('ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ');
            }
        }

        function resetToDefaults() {
            productData = {
                name: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ  Tã‚·ãƒ£ãƒ„",
                price: 2980,
                likes: 0,
                isLiked: false,
                showDetails: false,
                inCart: false,
                detailViews: 0,
                cartActions: 0,
                imageChanges: 0,
                currentImage: 1,
                lastUpdated: new Date().toISOString()
            };
            actionHistory = [];
        }

        // 14. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        likeBtn.addEventListener('click', handleLike);
        detailsBtn.addEventListener('click', handleDetailsToggle);
        cartBtn.addEventListener('click', handleCart);
        resetBtn.addEventListener('click', handleReset);
        demoBtn.addEventListener('click', runDemo);

        // ç”»åƒåˆ‡æ›¿ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        imageButtons.forEach((btn, index) => {
            btn.addEventListener('click', () => changeImage(index + 1));
        });

        // 15. åˆæœŸåŒ–å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== 19.4 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹ ===');
            console.log('æ–°ã—ã„å­¦ç¿’ãƒ†ãƒ¼ãƒ: CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨JavaScriptåˆ¶å¾¡');
            console.log('é‡è¦ãƒã‚¤ãƒ³ãƒˆ: è¦–è¦šçš„ã«é­…åŠ›çš„ãªUIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³');
            
            loadData();
            updateDisplay();
            
            addToHistory('ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹');
            logAnimation('åˆæœŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†');
            showNotification('ğŸ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã¸ã‚ˆã†ã“ãï¼', 'success');
            
            console.log('ğŸŒŸ å„æ©Ÿèƒ½ã‚’è©¦ã—ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã‚’æ¥½ã—ã‚“ã§ãã ã•ã„ï¼');
        });
    </script>
</body>
</html>