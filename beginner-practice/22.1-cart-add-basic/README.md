# 22.1-cart-add-basic：カート追加基礎

## 🎯 今回学ぶたった1つの新しいこと
**配列への要素追加（push操作）**  
JavaScriptの配列に新しい要素を追加する`push()`メソッドの使い方を学びます。

## 📖 前回までの復習
- 基本的なHTML/CSSでのページ作成
- JavaScriptでのボタンクリックイベント処理
- `console.log()`でのデバッグ出力
- 配列の基本的な概念

## 🚀 今回作るもの
シンプルなECサイトで「カートに追加」ボタンを押すと、商品がカート配列に追加される機能を作ります。

### 完成イメージ
```
┌─────────────────────────┐
│ 🛍️ シンプルショップ      │
├─────────────────────────┤
│ [商品A] ¥1,000          │
│ [カートに追加]           │
│                         │
│ [商品B] ¥2,000          │
│ [カートに追加]           │
│                         │
│ コンソールでカート内容確認│
└─────────────────────────┘
```

## 💡 なぜこれが重要？
ECサイトの最も基本的な機能が「カートに追加」です。この機能なしにはオンラインショッピングは成り立ちません。配列のpush操作は、その後のすべてのカート機能の土台となる重要なスキルです。

## 📝 ステップバイステップ解説

### Step 1: HTML構造を理解しよう
```html
<div class="product">
  <h3>商品A</h3>
  <p>¥1,000</p>
  <button onclick="addToCart('商品A', 1000)">カートに追加</button>
</div>
```
- `onclick`属性でボタンクリック時の関数を指定
- 関数に商品名と価格を渡す

### Step 2: 配列の準備
```javascript
// カート用の空の配列を作成
let cart = [];
```
- `let`を使って変更可能な配列を宣言
- 最初は空の配列 `[]` から始める

### Step 3: push()メソッドを使った追加
```javascript
function addToCart(productName, price) {
  // 商品情報をオブジェクトとして作成
  const product = {
    name: productName,
    price: price
  };
  
  // 配列に追加
  cart.push(product);
  
  // 確認用のログ出力
  console.log('カートに追加しました:', product);
  console.log('現在のカート:', cart);
}
```

### Step 4: 実際の動作確認
1. ブラウザでページを開く
2. F12キーでコンソールを開く
3. 「カートに追加」ボタンをクリック
4. コンソールでカートの中身を確認

## 🔍 重要なポイント

### push()メソッドとは？
- **配列の最後に新しい要素を追加する**メソッド
- **元の配列を変更する**（破壊的メソッド）
- **戻り値は配列の新しい長さ**

```javascript
const fruits = ['りんご', 'バナナ'];
fruits.push('オレンジ');
console.log(fruits); // ['りんご', 'バナナ', 'オレンジ']
```

### オブジェクトで商品情報を管理
```javascript
const product = {
  name: '商品名',
  price: 1000
};
```
- 商品の情報を1つのオブジェクトにまとめる
- 後で価格や商品名を簡単に取得できる

## ⚠️ よくあるエラーと対処法

### エラー1: 「cart is not defined」
```javascript
// ❌ 悪い例
function addToCart() {
  cart.push(product); // cartが定義されていない
}

// ✅ 良い例
let cart = []; // 最初にcartを定義
function addToCart() {
  cart.push(product);
}
```

### エラー2: 「Cannot read property 'push' of undefined」
```javascript
// ❌ 悪い例
let cart; // undefinedになる
cart.push(product); // エラー

// ✅ 良い例
let cart = []; // 空の配列で初期化
cart.push(product); // 正常に動作
```

## ✅ 完成チェックリスト
- [ ] ページに商品と「カートに追加」ボタンが表示される
- [ ] ボタンをクリックしてもエラーが出ない
- [ ] コンソールに「カートに追加しました」と表示される
- [ ] コンソールでcart配列の中身を確認できる
- [ ] 複数回ボタンを押すと配列に複数の商品が追加される
- [ ] 異なる商品でも正しく追加される

## 🔗 次回予告
次回「22.2-cart-display-system」では、配列に入った商品をページ上に表示する方法を学びます。`map()`メソッドを使って、配列の内容を動的にHTMLに変換する技術を身につけましょう！

---
**💻 実際にコードを書いて動かしてみましょう！エラーが出ても心配いりません。コンソールのメッセージをよく読んで、一歩ずつ解決していくことが上達の近道です。**